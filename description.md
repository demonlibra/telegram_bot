# Функционал

1. Новый участник группы, который подключается самостоятельно, в течении заданного времени должен ввести ключевую фразу или цифры с изображения, отправив команду **/captcha**, иначе будет исключён из группы.  
Все сообщения нового участника, не прошедшего проверку, удаляются автоматически.  
При проверке нового участник используется спам фильтр из файла **spam_new_members.txt**.
 
2. Отправка статистики работы бота по команде **/get_stat** или **/statistics** и расписанию.  
По команде **/get_stat <дней>** или **/statistics <дней>** отправляется статистика, за указанное количество дней.

3. Если ответить на сообщение текстом **@ban**, **/ban** или **bban**, создаётся опрос блокировки участника группы.  
При блокировке удаляются сообщения за последние 2-е суток.  
С целью защиты от атак, функцией могут воспользоваться только участники, состоящие в группе больше 30 дней.  
Блокировка возможна только участника, состоящего в группе меньше 7 дней.

4. Если ответить на сообщение текстом **@mute**, **/mute** или **mmute <число_часов>**, участник временно лишится возможности отправлять сообщения в чат.  
Если не указать **<число_часов>**, блокировка будет выполнена на 24 часа.  
Функцию могут использовать только основатель группы и администраторы с правом блокировать участников группы.  
Блокировка снимается, если ответить текстом **unmute** или **umute** на сообщение блокированного участника. 

5. При обнаружении в тексте сообщения ключевых спам фраз из файла **spam.txt**, автор сообщения блокируется и его сообщения за последние 2-е суток удаляются.

6. Отправляются кнопки со ссылками, если сообщение содержит ключевую фразу:  
**/help** **/start** **/inf**

7. Отправляется сообщение при обнаружении в тексте шаблона (регулярного выражения) из **markers_links**. 

8. Участники группы с именами, не содержащими символы кириллицы, латиницы или цифры, периодически получают информационное сообщение.

9. Информационные сообщения от бота не будут следовать друг за другом.  
Задан минимальный промежуток между повторами сообщений.

10. Сообщения со "здоровенными" ссылками **aliexpess** удаляются и отправляются сообщения с "нормальными" ссылками.

11. Удаляются сообщения при обнаружении в тексте шаблона (регулярного выражения) из **markers_to_delete**.

12. Сообщения с матом удаляются автоматически.  
Получить текст сообщения можно отправив команду **/cens** лично боту.

13. Голосовые сообщения удаляются автоматически.

14. Для моделей в формате **STL** и **STEP** отправляются изображения-миниатюры.  
В параметрах задано ограничение на размер файла модели.

15. Бот обслуживает только разрешённые группы.  
При обнаружении присутствия в чужой группе, бот ругается и выходит из группы.

16. Бот сохраняет историю действий в файл **bot.log** и базу данных **bot.db**.

## Служебные команды
| Команда | Описание | Примечание |
| --- | --- | --- |
| /get_chat_id | id чата | |
| /get_stat или /statistics | статистика за 7 дней | |
| /get_stat <дней> | статистика за указанное количество дней | |
| /test | raw сообщения | |
| <ответ на сообщение> /test | raw сообщения | |
| /member_id <id_пользователя> ... | информация о пользователе по id | |
| /ban_id <id_пользователя> ... | блокировка участника по id | Только для администраторов группы |
| /unban_id <id_пользователя> ... | разблокировка участника по id | Только для администраторов группы |

## Служебные команды лично боту
| Команда | Описание | Примечание |
| --- | --- | --- |
| /get_log | файл log | Только для администраторов группы |
| /get_log N | N последних строк log | Только для администраторов группы |
| /get_log N <ключевая_фраза> | N последних строк log с ключевой фразой | Только для администраторов группы |

<img src="https://github.com/demonlibra/telegram_bot/blob/master/log.png" width="300">